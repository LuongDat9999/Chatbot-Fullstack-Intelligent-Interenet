@tailwind base;
@tailwind components;
@tailwind utilities;

/* Dark Background with Starry Texture */
@layer base {
  body {
    color: #BAE9F4;
    background-color: #0B1114;
    background-image: 
      radial-gradient(circle at 20% 50%, rgba(129, 225, 255, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(186, 233, 244, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 40% 80%, rgba(38, 79, 104, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 60% 30%, rgba(255, 255, 255, 0.02) 0%, transparent 30%),
      radial-gradient(circle at 30% 70%, rgba(255, 255, 255, 0.02) 0%, transparent 30%),
      radial-gradient(circle at 70% 80%, rgba(255, 255, 255, 0.02) 0%, transparent 30%);
    background-size: 100% 100%, 100% 100%, 100% 100%, 200px 200px, 150px 150px, 180px 180px;
    background-attachment: fixed;
    margin: 0;
    padding: 0;
    min-height: 100vh;
  }
  
  /* Subtle noise texture */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
      url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.02'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: -1;
  }
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fadeIn 0.5s ease-out;
}

/* Border Glow Utility */
@layer utilities {
  .border-glow {
    border: 1px solid theme('colors.borderGlow');
    box-shadow: 
      0 0 10px rgba(38, 79, 104, 0.3),
      inset 0 0 10px rgba(38, 79, 104, 0.1);
  }
  
  .border-glow-accent {
    border: 1px solid theme('colors.accent');
    box-shadow: 
      0 0 15px rgba(129, 225, 255, 0.4),
      inset 0 0 15px rgba(129, 225, 255, 0.1);
  }
  
  .input-glow {
    border: 1px solid theme('colors.borderGlow');
    box-shadow: 
      0 0 10px rgba(38, 79, 104, 0.3),
      inset 0 0 10px rgba(38, 79, 104, 0.1);
    transition: all 0.3s ease;
  }
  
  .input-glow:focus {
    border: 1px solid theme('colors.accent');
    box-shadow: 
      0 0 20px rgba(129, 225, 255, 0.5),
      inset 0 0 20px rgba(129, 225, 255, 0.1),
      0 0 40px rgba(129, 225, 255, 0.2);
  }
  
  .text-glow {
    text-shadow: 0 0 10px rgba(186, 233, 244, 0.5);
  }
  
  .text-glow-accent {
    text-shadow: 0 0 15px rgba(129, 225, 255, 0.6);
  }
}

/* Fix overflow issues in markdown content */
/* Fix 1: Buộc code block (pre) phải cuộn ngang (overflow-x-auto) 
  và không bao giờ rộng hơn 100% container của nó.
*/
.prose pre {
  max-width: 100%;
  overflow-x: auto;
  white-space: pre; /* Giữ nguyên định dạng preformatted */
}

/* Fix 2: Buộc table (nếu có) cũng phải cuộn ngang
*/
.prose table {
  width: 100%;
  display: block;
  overflow-x: auto;
  white-space: nowrap;
}

/* Fix 3: Buộc code inline (thẻ `code` không phải block) 
  hoặc các từ quá dài phải bẻ gãy.
*/
.prose code {
  word-break: break-all;
}

/* CRITICAL: Global text overflow fixes */
/* Fix 4: Tất cả các element có thể chứa text dài */
* {
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Fix 5: Đảm bảo tất cả container không bị tràn */
.container, .max-w-*, .w-* {
  max-width: 100%;
  overflow-x: hidden;
}

/* Fix 6: Code blocks và preformatted text */
pre, code {
  max-width: 100%;
  overflow-x: auto;
  word-break: break-all;
  white-space: pre-wrap;
}

/* Fix 7: Tables */
table {
  max-width: 100%;
  table-layout: fixed;
  word-wrap: break-word;
}

/* Fix 8: Long URLs và paths */
a, span, div, p {
  word-break: break-all;
  overflow-wrap: break-word;
}

/* Fix 9: Message containers */
.message-content, .chat-message, [class*="message"] {
  max-width: 100%;
  overflow-x: hidden;
  word-wrap: break-word;
}

/* Fix 10: Specific fixes for file paths */
[class*="path"], [class*="file"], [class*="url"] {
  word-break: break-all;
  overflow-wrap: break-word;
  max-width: 100%;
}
